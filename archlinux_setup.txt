arch linux setup:
- download iso
- identify usb device -> lsblk
- sudo wipefs -a /dev/sdX -> clean step 1
- sudo dd if=/dev/zero of=/dev/sdX bs=1M count=10 -> clean step 2
- depending on device: boot from usb -> now in arch installer zsh shell
- if font too small -> setfont ter-v32b
- check internet connection -> ip link
- connect via wifi -> iwctl -> new sub shell
  - device list -> should at least show wlan0
  - if not already powered on, then:
    - device <name> set-property Powered on
    - adapter <adapter> set-property Powered on
  - station <name> scan
  - station <name> get-networks -> should show available routers
  - station <name> connect <SSID> -> prompt for passphrase
  - leave shell and check connection -> ping archlinux.org
- timedatectl -> make sure clock is synchronized
- fdisk -l -> identify which disk to use
- fdisk /dev/<name-of-disk-to-partition> -> new sub shell (for my old notebook with bios, not uefi), in my case /dev/sda
  - o -> create new DOS (MBR) partition table
  - swap partition:
    - n -> new partition
    - p -> primary
    - 1 -> partition number
    - <enter> -> default start
    - +4G -> custom end, swap size
    - t -> partition type
    - 82 -> linux swap
  - create root partition:
    - n
    - p
    - 2
    - <enter> -> default start (after swap)
    - <enter> -> default end (rest of disk)
    - t
    - 2
    - 83 -> linux filesystem
  - make root bootable
    - a
    - 2
  - p -> check layout
  - w -> write table, should exit the sub shell
- mkfs.ext4 /dev/sda2
- mkswap /dev/sda1
- mount /dev/sda2 /mnt
- swapon /dev/sda1
- pacstrap -K /mnt base linux linux-firmware vim iwd sudo grub man-db man-pages which git curl
- genfstab -U /mnt >> /mnt/etc/fstab -> uuid for paritions, need for boot and systemd init
- arch-chroot /mnt -> change into mounted roo, interact with newly created filesystem -> new sub shell
  - ln -sf /usr/share/zoneinfo/Europe/Vienna /etc/localtime -> set local time
  - hwclock --systohc -> hardware clock to UTC
  - vim /etc/locale.gen -> uncomment en_US.UTF-8 UTF-8
  - locale-gen -> generate locales
  - vim /etc/locale.conf -> add line: LANG=en_US.UTF-8
  - vim /etc/hostname -> add preferred name
  - vim /etc/vconsole.conf -> add keymap: KEYMAP=us
  - mkinitcpio -P -> create the config from the previously edited files
  - passwd -> set password
  - pacman -S grub -> download bootloader
  - grub-intall /dev/sda -> install bootloader with disk info
  - systemctl enable iwd -> wifi capability on startup
  - exit -> exit chroot shell
- reboot

- login on new system -> root + password -> only terminal for now
- systemctl enable --now systemd-resolved -> if forgot to configure network in chroot shell
- ln -sf /run/systemd/resolve/stub-resolv.conf /etc/resolv.conf -> correct file for dns resolution
- iwctl -> connect to internet, same as during install

- post installation -> setting up personal system
  - useradd -m <user-name> -> default is root, which is not recommeded
  - vim /etc/sudoers -> uncomment 2 lines that say to allow to run as other user if password known
  - sudo pacman -S xorg xorg-xinit xorg-xrandr xorg-xsetroot xorg-xprop -> needed for i3wm install/setup
  - sudo pacman -S i3 i3status i3lock dmenu -> install basics for i3wm
  - sudo pacman -S feh xterm firefox picom
  - echo "exec i3" > ~/.xinitrc -> the 'startx' command launches i3
  - sudo mkdir -p /etc/systemd/system/getty@tty1.service.d
  - sudo vim /etc/systemd/system/getty@tty1.service.d/override.conf -> add the following content:
    ```
    [Service]
    ExecStart=
    ExecStart=-/sbin/agetty --autologin <your_username> --noclear %I $TERM
    ```
  - sudo systemctl daemon-reexec
  - sudo vim ~/.bash_profile -> for new user, not root
    ```
    if [ -z "$DISPLAY" ] && [ "$(tty)" = "/dev/tty1" ]; then
        exec startx
    fi
    ```
  - the last steps force the system to login as the specified user, and launch i3wm, no login prompt
  - remove the /etc/systemd/system/getty@tty1.service.d directory and run sudo systemctl daemon-reexec to disable autologin, but keep i32m launch
  - install yay for advanced package management -> aur helper
    - use these commands -> installs all dependencies including go if not already installed
    ```
    sudo pacman -S --needed git base-devel
    git clone https://aur.archlinux.org/yay.git
    cd yay
    makepkg -si
    ```

MISC:
  - hw clock configured incorrectly:
    - sudo systemctl enable --now systemd-timesyncd.service
    - sudo timedatectl set-ntp true
  - missing certificates
    - sudo pacman -Syu ca-certificates ca-certificates-utils
    - sudo update-ca-trust
  - debugging dns issues
    - sudo pacman -S dnsutils
    - nslookup github.com
  - issues with only supporting ipv6
    - edit /etc/iwd/main.conf and add these lines:
    ```
    [General]
    EnableNetworkConfiguration=true
    [Network]
    NameResolvingService=systemd
    ```
    - sudo systemctl restart iwd -> ping github.com should work now
  - downnload favorite nerdfont from the webiste and unzip the *.ttf file to .local/share/fonts, then fc-cache -fv to update -> use in .Xresources
  - use zsh as default shell: chsh -s $(which zsh) + configure oh-my-zsh
  - xterm sucks to configure -> use alacritty, modern and better anyways, config only involves nerdfont setup
  - tmux is a must have -> sudo pacman -S tmux; config when done

i3wm setup:
  - change stuff in .config/i3/config
  - TODO: just copy the config when done
  - keywords: fontsize (i3wm and dmenu separately), background
  - also i3status -> bar bottom

xterm setup:
  - not yet sure if i keep it, but it is minimal
  - TODO: just copy the config when done
  - no; use alacritty instead

alacritty setup:
  - TODO: just copy the config when done

zsh setup:
  - create .zprofile file and add this line: ```if [ -z "$DISPLAY" ] && [ "$(tty)" = "/dev/tty1" ]; then exec startx fi```
  - TODO: just copy the .zshrc when done
  - for zsh-vi-mode install via yay: yay -S zsh-vi-mode (rest done in .zshrc)
  - for autosuggestions: git clone https://github.com/zsh-users/zsh-autosuggestions ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions (rest done in .zshrc)

tmux setup:
  - TODO: just copy .tmux.conf when done + plugin guide
